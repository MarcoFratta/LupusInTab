@import "tailwindcss";

/* Fallback styles in case Tailwind doesn't load */
body {
  margin: 0;
  background: #0a0a0a; /* neutral-950 */
  color: #e5e5e5; /* neutral-200 */
  font-family: 'Inter', system-ui, sans-serif;
  min-height: 100vh;
  line-height: 1.5;
  -webkit-text-size-adjust: 100%; /* Prevent font scaling on iOS */
  -webkit-tap-highlight-color: transparent; /* Remove tap highlight */
}

#app {
  display: flex;
  align-items: center;    /* center vertically */
  justify-content: center;/* center horizontally */
  padding: 0;             /* no padding on mobile */
  min-height: 100vh;
  width: 100%;
}

@media (min-width: 640px) {
  #app {
    padding: 0.75rem;
  }
}

@media (min-width: 768px) {
  #app {
    padding: 1rem;
  }
}

@layer components {
  .btn {
    @apply inline-flex items-center justify-center gap-1 sm:gap-2 rounded-md text-sm font-medium px-3 sm:px-4 py-2 transition-colors border shadow-sm;
  }
  .btn-primary {
    @apply bg-neutral-700 text-neutral-100 border-neutral-700 hover:bg-neutral-600 hover:border-neutral-600;
  }
  .btn-accent {
    @apply bg-gradient-to-r from-violet-500 to-fuchsia-500 text-white border-transparent hover:from-violet-400 hover:to-fuchsia-400 shadow-md;
  }
  .btn-secondary {
    @apply bg-neutral-900/60 text-neutral-200 border-neutral-800 hover:bg-neutral-800/60;
  }
  .btn-ghost {
    @apply bg-transparent text-neutral-300 border-neutral-800 hover:bg-neutral-900/60 hover:text-neutral-100;
  }
  .btn-danger {
    @apply bg-red-600 text-white border-red-600 hover:bg-red-500;
  }
  .btn-disabled {
    @apply opacity-50 cursor-not-allowed;
  }

  .panel {
    @apply bg-neutral-900/60 border border-neutral-800/40 rounded-xl;
  }
  .stat-card {
    /* can't @apply custom classes in Tailwind v4; inline the utilities */
    @apply bg-neutral-900/60 border border-neutral-800/40 rounded-xl p-4 hover:bg-neutral-900/80 transition-colors;
  }
}

/* Mobile-specific fixes for Capacitor */
@supports (padding-top: env(safe-area-inset-top)) {
  body {
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }
}





/* Ensure content doesn't overlap with status bar on mobile */
@media (max-width: 768px) {
  body {
    padding-top: 20px;
  }
  
  /* Add safe area support for modern mobile devices */
  @supports (padding-top: env(safe-area-inset-top)) {
    body {
      padding-top: calc(20px + env(safe-area-inset-top));
    }
  }
  
  /* Mobile-first: remove default margins and optimize for full-width */
  #app {
    padding: 0;
    width: 100%;
    max-width: none;
  }
  
  /* Prevent horizontal overflow on mobile */
  body, html {
    overflow-x: hidden;
    max-width: 100vw;
  }
  
  /* Additional mobile overflow prevention */
  * {
    max-width: 100%;
    box-sizing: border-box;
  }
  
  /* Simple mobile role details fix */
  .role-details-page {
    width: 100vw;
    max-width: 100vw;
    overflow-x: hidden;
  }
  
  /* Mobile-specific touch optimizations */
  /* Improve touch targets for general interactive elements */
  button:not(.role-counter-btn), a:not(.role-counter-btn), [role="button"]:not(.role-counter-btn), input:not(.role-counter-input), select:not(.role-counter-select), textarea:not(.role-counter-textarea) {
    min-height: 44px;
    min-width: 44px;
  }
  
  /* Role counter elements should maintain their intended size */
  .role-counter-btn, .role-counter-display {
    min-height: unset !important;
    min-width: unset !important;
  }
  
  /* Bottom navigation touch optimizations */
  .fixed.bottom-0 a, .fixed.bottom-0 button {
    min-height: 44px;
    min-width: 44px;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
  }
  
  /* Better mobile scrolling */
  * {
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
  }
  
  /* Remove focus outlines on mobile for cleaner look */
  button:focus, a:focus, input:focus, select:focus, textarea:focus {
    outline: none;
  }
  
  /* Optimize text selection for mobile */
  ::selection {
    background-color: rgba(59, 130, 246, 0.3);
    color: inherit;
  }
}

/* Capacitor-specific mobile optimizations */
.capacitor-mobile {
  /* Prevent horizontal scrolling */
  overflow-x: hidden;
  
  /* Ensure proper touch targets */
  button, a, [role="button"] {
    min-height: 44px;
    min-width: 44px;
  }
  
  /* Improve mobile scrolling */
  * {
    -webkit-overflow-scrolling: touch;
  }
}

/* Mobile bottom navigation bar styling */
@media (max-width: 768px) {
  /* Safe area support for bottom navigation */
  .pb-safe {
    padding-bottom: env(safe-area-inset-bottom);
  }
  
  /* Ensure content doesn't get hidden behind bottom navigation */
  .pb-20 {
    padding-bottom: calc(5rem + env(safe-area-inset-bottom));
  }
  
  /* Enhanced backdrop blur support */
  @supports (backdrop-filter: blur(20px)) {
    .backdrop-blur-xl {
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
    }
  }
  
  /* Ensure bottom navigation is truly sticky */
  .fixed.bottom-0 {
    position: fixed !important;
    bottom: 0 !important;
    left: 0 !important;
    right: 0 !important;
    z-index: 9999 !important;
    width: 100% !important;
    height: auto !important;
  }
  
  /* Prevent body scrolling when bottom nav is active - only during setup */
  body.has-bottom-nav {
    padding-bottom: calc(5rem + env(safe-area-inset-bottom));
  }
  
  /* Ensure the main content area respects the bottom navigation - only during setup */
  #app.has-bottom-nav {
    min-height: calc(100vh - 5rem - env(safe-area-inset-bottom));
  }
  
  /* Force bottom navigation to be visible and properly positioned */
  .fixed.bottom-0.sm\\:hidden {
    display: block !important;
    position: fixed !important;
    bottom: 0 !important;
    left: 0 !important;
    right: 0 !important;
    z-index: 9999 !important;
  }
  
  /* Ensure bottom navigation is always on top and properly positioned */
  .fixed.bottom-0 {
    position: fixed !important;
    bottom: 0 !important;
    left: 0 !important;
    right: 0 !important;
    z-index: 9999 !important;
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
  }
}